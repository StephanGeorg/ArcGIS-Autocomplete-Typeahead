(function(){var t={}.hasOwnProperty,e=function(e,o){function n(){this.constructor=e}for(var r in o)t.call(o,r)&&(e[r]=o[r]);return n.prototype=o.prototype,e.prototype=new n,e.__super__=o.prototype,e};!function(t){return this.AutocompleteResult=function(){function t(t,e){}return t}(),this.Autocomplete=function(o){function n(e){var o="https://geocode.arcgis.com/arcgis/rest/services/World/GeocodeServer/suggest?text=%QUERY";null===e&&(e={}),e.location&&(o=o+"&location="+e.location,e.distance&&(o=o+"&distance="+e.distance)),e.format?o=o+"&f="+e.format:o+="&f=json",e.categories&&(o=o+"&category="+e.categories),e.prefetch&&(this.options=t.extend({prefetch:e.prefetch})),this.options=t.extend({datumTokenizer:function(t){return Bloodhound.tokenizers.whitespace(t.text)},queryTokenizer:Bloodhound.tokenizers.whitespace,remote:{url:o,wildcard:"%QUERY",filter:function(e){return t.map(e.suggestions,function(t){return{text:t.text,magicKey:t.magicKey}})}},limit:10},e),n.__super__.constructor.call(this,this.options)}return e(n,o),n.prototype.bindTypeaheadEvent=function(t,e,o){var n=this;t.on("typeahead:selected",function(t,r,c){n.geocode(r.text,r.magicKey,e,o)}),t.on("typeahead:autocompleted",function(t,r,c){console.log(r),n.geocode(r.text,r.magicKey,e,o)})},n.prototype.geocode=function(e,o,n,r){var c="https://geocode.arcgis.com/arcgis/rest/services/World/GeocodeServer/find";t.ajax({url:c,data:{text:e,f:"json",magicKey:o,outFields:"*"},dataType:"json"}).done(function(t){"function"==typeof n&&n(t)}).fail(function(t){"function"==typeof r&&r(t)}).always(function(t){});return!1},n.prototype.reverseGeocode=function(t){},n}(Bloodhound)}(jQuery)}).call(this);
